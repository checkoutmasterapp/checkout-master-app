extends ../../layouts/backend_layout

block header_breadcrumb
    nav
        ol.breadcrumb
            li.breadcrumb-item Home
            li.breadcrumb-item.active Billing Details

block content 
    main#main.main
        section.section.profile
            .invoice-details-section
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        a(href=(`/${store_id}/billing-details`))
                            <button class="nav-link biling-txt" id="home-tab" data-bs-target="#home-tab-pane" type="button" role="tab" aria-controls="home-tab-pane" aria-selected="false">Billing Details</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        a(href=(`/${store_id}/invoice-details`))
                            <button class="nav-link biling-txt active" id="profile-tab" data-bs-target="#profile-tab-pane" type="button" role="tab" aria-controls="profile-tab-pane" aria-selected="true">Invoices</button>
                    </li>
                </ul>

                <div class="tab-content" id="myTabContent">
                    <div class="tab-pane fade show active" id="profile-tab-pane" role="tabpanel" aria-labelledby="profile-tab" tabindex="0">
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item">
                                    a(href=(`/${store_id}/billing-details`))
                                        |Billing Details
                                </li>
                                <li class="breadcrumb-item">
                                    a(href=(`/${store_id}/invoice-details`))
                                        |Invoices
                                </li>
                                <li class="breadcrumb-item active" aria-current="page">Invoice # #{user_billings_invoices? user_billings_invoices.stripe_invoice_number: ''}</li>
                            </ol>
                        </nav>
                        <div id="printarea" class="container" style="margin-top: 15px;">
                            <div class="row">
                                <div class="col-md-10">
                                    <div class="invoice-title"><h2>Invoice</h2></div>
                                    <hr>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <p><strong>Invoice Number:</strong> #{user_billings_invoices? user_billings_invoices.stripe_invoice_number: ''}</p>
                                            <p><strong>Customer:</strong> #{user_detail? user_detail.first_name+' '+user_detail.last_name : 'N/A'}</p>
                                            if(user_billings_invoices.status === 'Active')
                                                <p><strong>Start Date:</strong> #{user_billings_invoices? moment(user_billings_invoices.start_date).format('DD-MM-YYYY'): ''}</p>
                                                <p><strong>End Date:</strong> #{user_billings_invoices? moment(user_billings_invoices.end_date).format('DD-MM-YYYY'): ''}</p>
                                        </div>
                                        <div class="col-md-6 text-right">
                                            <p><strong>Date:</strong> #{user_billings_invoices && user_billings_invoices.status === "Active"? moment(user_billings_invoices.start_date).format('DD-MM-YYYY'): '--'}</p>
                                            <p><strong>Method:</strong> Stripe</p>
                                            <p><strong>Status:</strong> #{invoice_status}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <div class="invoice-title">
                                        <button id="print_invoice" onclick="printDiv('printarea')" type="button" class="btn btn-info btn-sm hide_print" style="margin-top: 2px;"><i class="bi bi-printer-fill"></i> Print</button>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-10">
                                    <div class="panel panel-default">
                                        <div class="panel-body">
                                            <div class="table-responsive">
                                                <table id="pdf_view" class="table table-condensed">
                                                    <thead>
                                                        <tr>
                                                            <td><strong>Charge</strong></td>
                                                            <td class="text-right"><strong>Amount</strong></td>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <!-- foreach ($order->lineItems as $line) or some such thing here -->
                                                        <tr>
                                                            <td>
                                                                |#{subscription_package.package_name}
                                                                |<br>
                                                                |#{user_billings_invoices? moment(user_billings_invoices.created_at).format('DD-MM-YYYY'):''}
                                                            </td>
                                                            <td class="text-right">$#{parseFloat(subscription_package.price)}</td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                |Checkout Master- Transaction Fees
                                                                |<br>
                                                                |#{user_billings_invoices? moment(user_billings_invoices.created_at).format('DD-MM-YYYY'):''}
                                                            </td>
                                                            <td class="text-right">$#{user_billings_invoices.revenue_amount ? parseFloat(user_billings_invoices.revenue_amount).toFixed(2) : "0.00"}</td>
                                                        </tr>
                                                        <tr>
                                                            <td class="thick-line text-right"><strong>Total</strong></td>
                                                            <td class="thick-line text-right">$#{user_billings_invoices.price? parseFloat(user_billings_invoices.price).toFixed(2): "0.00"}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

block scripts
    script(type='text/javascript' src='/assets/js/custom/billing_details.js')